import{r as i,j as t}from"./index-D_qvBJzx.js";import{P as p}from"./PDFButton-D8tUxpMY.js";function B(){const[f,j]=i.useState(null),[l,u]=i.useState([]),[c,g]=i.useState([]),[x,m]=i.useState(!1);async function b(a){const e=a.target.files[0];if(!e)return;j(e);const s=await e.arrayBuffer(),n=await p.load(s);u(new Array(n.getPageCount()).fill(!1)),g(new Array(n.getPageCount()).fill(0))}function v(a){u(e=>e.map((s,n)=>n===a?!s:s))}function w(a){g(e=>e.map((s,n)=>n===a?(s+90)%360:s))}async function P(){if(f){m(!0);try{const a=await f.arrayBuffer(),e=await p.load(a),s=l.flatMap((o,d)=>o?[d]:[]);if(s.length===0){alert("Pick pages to export");return}const n=await p.create();(await n.copyPages(e,s)).forEach((o,d)=>{n.addPage(o);const R=s[d],h=c[R]||0;h&&o.setRotation(h)});const k=await n.save(),C=new Blob([k],{type:"application/pdf"}),y=URL.createObjectURL(C),r=document.createElement("a");r.href=y,r.download="extracted.pdf",r.click(),URL.revokeObjectURL(y)}catch(a){console.error(a),alert("Failed: "+a.message)}finally{m(!1)}}}return t.jsxs("div",{children:[t.jsx("h2",{children:"Split / Extract Pages"}),t.jsxs("div",{className:"dropzone",children:[t.jsx("input",{type:"file",accept:"application/pdf",onChange:b}),t.jsx("div",{className:"muted",children:"Load a PDF then select pages to export."})]}),t.jsx("div",{style:{marginTop:12},children:l.length>0&&t.jsxs("div",{children:[t.jsx("div",{className:"muted",children:"Click pages to toggle selection. Use rotate to change orientation."}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(120px,1fr))",gap:8,marginTop:8},children:l.map((a,e)=>t.jsx("div",{className:"file-item",style:{cursor:"pointer",background:a?"#eef2ff":""},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[t.jsxs("div",{onClick:()=>v(e),style:{flex:1},children:["Page ",e+1," ",c[e]?`• ${c[e]}°`:""]}),t.jsx("div",{style:{display:"flex",gap:6},children:t.jsx("button",{className:"btn",onClick:()=>w(e),children:"Rotate"})})]})},e))}),t.jsx("div",{style:{marginTop:12},children:t.jsx("button",{className:"btn",onClick:P,disabled:x,children:x?"Working...":"Export Selected"})})]})})]})}export{B as default};
