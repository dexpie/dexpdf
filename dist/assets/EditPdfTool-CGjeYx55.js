import{r as s,j as e}from"./index-D_qvBJzx.js";import{P as R,S as B,r as m}from"./PDFButton-D8tUxpMY.js";function D(){const[p,y]=s.useState(null),[n,j]=s.useState("text"),[u,w]=s.useState("New text"),[g,f]=s.useState(!1),[l,v]=s.useState(null);async function b(t){var i;const a=(i=t.target.files)==null?void 0:i[0];a&&y(a)}async function F(t){var i;const a=(i=t.target.files)==null?void 0:i[0];a&&v(a)}async function S(){if(!p)return alert("Select a PDF");f(!0);try{const t=await p.arrayBuffer(),a=await R.load(t),i=a.getPages(),T=await a.embedFont(B.Helvetica),o=i[0],{width:L,height:r}=o.getSize();if(n==="text")o.drawText(u,{x:40,y:r-80,size:14,font:T,color:m(0,0,0)});else if(n==="image"&&l){const h=await l.arrayBuffer(),C=(l.type||"").toLowerCase();let d;C.includes("png")?d=await a.embedPng(h):d=await a.embedJpg(h),o.drawImage(d,{x:40,y:r-200,width:150,height:120})}else o.drawRectangle({x:40,y:r-240,width:200,height:100,color:m(.9,.9,.9)});const E=await a.save(),P=new Blob([E],{type:"application/pdf"}),x=URL.createObjectURL(P),c=document.createElement("a");c.href=x,c.download="edited.pdf",c.click(),URL.revokeObjectURL(x)}catch(t){console.error(t),alert("Failed: "+t.message)}finally{f(!1)}}return e.jsxs("div",{children:[e.jsx("h2",{children:"Edit PDF"}),e.jsx("input",{type:"file",accept:"application/pdf",onChange:b}),e.jsxs("div",{style:{marginTop:8},children:[e.jsx("label",{children:"Mode"}),e.jsxs("select",{value:n,onChange:t=>j(t.target.value),children:[e.jsx("option",{value:"text",children:"Add Text"}),e.jsx("option",{value:"image",children:"Add Image"}),e.jsx("option",{value:"shape",children:"Add Shape"})]})]}),n==="text"&&e.jsx("div",{style:{marginTop:8},children:e.jsx("input",{value:u,onChange:t=>w(t.target.value),style:{width:"60%"}})}),n==="image"&&e.jsx("div",{style:{marginTop:8},children:e.jsx("input",{type:"file",accept:"image/*",onChange:F})}),e.jsx("div",{style:{marginTop:12},children:e.jsx("button",{className:"btn-primary",onClick:S,disabled:g,children:g?"Working...":"Apply Edits"})})]})}export{D as default};
