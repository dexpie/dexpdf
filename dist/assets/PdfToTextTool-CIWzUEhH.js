import{r as c,j as a}from"./index-D_qvBJzx.js";import{p as f}from"./pdf-CB4NDRGm.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";try{f.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${f.version}/pdf.worker.min.js`}catch{}function L(){const[n,p]=c.useState(null),[d,u]=c.useState(!1),[m,i]=c.useState(!1),[j,x]=c.useState(!1);async function v(e){const t=e.target.files[0];t&&p(t)}function y(e){e.preventDefault(),i(!0)}function D(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"}function h(e){e.preventDefault(),i(!1)}async function b(e){var r,o;e.preventDefault(),i(!1);const t=(o=(r=e.dataTransfer)==null?void 0:r.files)==null?void 0:o[0];t&&(p(t),x(!0),setTimeout(()=>x(!1),1500))}async function T(){if(n){u(!0);try{const e=await n.arrayBuffer(),t=await f.getDocument({data:e}).promise;let r="";for(let s=1;s<=t.numPages;s++){const w=(await(await t.getPage(s)).getTextContent()).items.map(k=>k.str);r+=`
--- Page ${s} ---
`+w.join(" ")+`
`}const o=new Blob([r],{type:"text/plain"}),g=URL.createObjectURL(o),l=document.createElement("a");l.href=g,l.download=`${n.name.replace(/\.pdf$/i,"")}.txt`,l.click(),URL.revokeObjectURL(g)}catch(e){console.error(e),alert("Failed: "+e.message)}finally{u(!1)}}}return a.jsxs("div",{children:[a.jsx("h2",{children:"PDF → Text"}),a.jsxs("div",{className:`dropzone ${m?"dragover":""}`,onDragEnter:y,onDragOver:D,onDragLeave:h,onDrop:b,children:[a.jsx("input",{type:"file",accept:"application/pdf",onChange:v}),a.jsx("div",{className:"muted",children:"Select a PDF to extract text (plain text)."}),j&&a.jsx("div",{className:"drop-overlay",children:"✓ Uploaded"})]}),a.jsx("div",{style:{marginTop:12},children:a.jsx("button",{className:"btn-primary",onClick:T,disabled:d||!n,children:d?"Working...":"Extract Text"})})]})}export{L as default};
