const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DbBoW4Qq.js","assets/_commonjs-dynamic-modules-TDtrdbi3.js"])))=>i.map(i=>d[i]);
import{r as o,j as a,_ as j}from"./index-HKiqIxh0.js";import{p as l}from"./pdf-DLgImPGD.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";try{l.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${l.version}/pdf.worker.min.js`}catch{}function k(){const[g,u]=o.useState(null),[w,d]=o.useState(""),[f,p]=o.useState(!1);async function h(c){const r=c.target.files[0];if(r){u(r),d(""),p(!0);try{if(r.type==="application/pdf"){const e=await r.arrayBuffer(),t=await(await l.getDocument({data:e}).promise).getPage(1),s=t.getViewport({scale:2}),n=document.createElement("canvas");n.width=Math.ceil(s.width),n.height=Math.ceil(s.height);const x=n.getContext("2d");await t.render({canvasContext:x,viewport:s}).promise,await m(n)}else{const e=new Image,i=URL.createObjectURL(r);e.src=i,await new Promise(n=>e.onload=n);const t=document.createElement("canvas");t.width=e.naturalWidth,t.height=e.naturalHeight,t.getContext("2d").drawImage(e,0,0),URL.revokeObjectURL(i),await m(t)}}catch(e){console.error(e),alert("OCR failed: "+e.message)}finally{p(!1)}}}async function m(c){const{createWorker:r}=await j(async()=>{const{createWorker:t}=await import("./index-DbBoW4Qq.js").then(s=>s.i);return{createWorker:t}},__vite__mapDeps([0,1])),e=await r({logger:t=>{}});await e.load(),await e.loadLanguage("eng"),await e.initialize("eng");const{data:{text:i}}=await e.recognize(c);d(i),await e.terminate()}return a.jsxs("div",{children:[a.jsx("h2",{children:"OCR (Tesseract.js)"}),a.jsxs("div",{className:"dropzone",children:[a.jsx("input",{type:"file",accept:".png,.jpg,.jpeg,application/pdf",onChange:h}),a.jsx("div",{className:"muted",children:"Select an image or scanned PDF. Large files may take time; Tesseract runs locally in your browser."})]}),a.jsx("div",{style:{marginTop:12},children:f?a.jsx("div",{className:"muted",children:"Recognizing... (this may take a while)"}):a.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:w})})]})}export{k as default};
