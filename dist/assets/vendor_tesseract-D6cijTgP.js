import"./vendor-CVWXYixL.js";import{c as ne}from"./vendor_jszip-CPzOg1c2.js";function ae(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const c in n)if(c!=="default"&&!(c in e)){const L=Object.getOwnPropertyDescriptor(n,c);L&&Object.defineProperty(e,c,L.get?L:{enumerable:!0,get:()=>n[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var M=(e,t)=>`${e}-${t}-${Math.random().toString(16).slice(3,8)}`;const se=M;let U=0;var j=({id:e,action:t,payload:r={}})=>{let n=e;return typeof n>"u"&&(n=se("Job",U),U+=1),{id:n,action:t,payload:r}},A={};let P=!1;A.logging=P;A.setLogging=e=>{P=e};A.log=(...e)=>P?console.log.apply(void 0,e):null;const ie=j,{log:b}=A,ce=M;let D=0;var le=()=>{const e=ce("Scheduler",D),t={},r={};let n=[];D+=1;const c=()=>n.length,L=()=>Object.keys(t).length,S=()=>{if(n.length!==0){const s=Object.keys(t);for(let l=0;l<s.length;l+=1)if(typeof r[s[l]]>"u"){n[0](t[s[l]]);break}}},d=(s,l)=>new Promise((E,T)=>{const O=ie({action:s,payload:l});n.push(async $=>{n.shift(),r[$.id]=O;try{E(await $[s].apply(void 0,[...l,O.id]))}catch(h){T(h)}finally{delete r[$.id],S()}}),b(`[${e}]: Add ${O.id} to JobQueue`),b(`[${e}]: JobQueue length=${n.length}`),S()});return{addWorker:s=>(t[s.id]=s,b(`[${e}]: Add ${s.id}`),b(`[${e}]: Number of workers=${L()}`),S(),s.id),addJob:async(s,...l)=>{if(L()===0)throw Error(`[${e}]: You need to have at least one worker before adding jobs`);return d(s,l)},terminate:async()=>{Object.keys(t).forEach(async s=>{await t[s].terminate()}),n=[]},getQueueLen:c,getNumWorkers:L}},de=e=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof ne=="function"&&(t.type="node"),typeof e>"u"?t:t[e]};const ue=de("type")==="browser",fe=ue?e=>new URL(e,window.location.href).href:e=>e;var ge=e=>{const t={...e};return["corePath","workerPath","langPath"].forEach(r=>{e[r]&&(t[r]=fe(t[r]))}),t},z={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const pe="6.0.1",ye={version:pe};var Le={workerBlobURL:!0,logger:()=>{}};const he=ye.version,we=Le;var Se={...we,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${he}/dist/worker.min.js`},me=({workerPath:e,workerBlobURL:t})=>{let r;if(Blob&&URL&&t){const n=new Blob([`importScripts("${e}");`],{type:"application/javascript"});r=new Worker(URL.createObjectURL(n))}else r=new Worker(e);return r},Ae=e=>{e.terminate()},Ee=(e,t)=>{e.onmessage=({data:r})=>{t(r)}},Oe=async(e,t)=>{e.postMessage(t)};const N=e=>new Promise((t,r)=>{const n=new FileReader;n.onload=()=>{t(n.result)},n.onerror=({target:{error:{code:c}}})=>{r(Error(`File could not be read! Code=${c}`))},n.readAsArrayBuffer(e)}),I=async e=>{let t=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?t=atob(e.split(",")[1]).split("").map(r=>r.charCodeAt(0)):t=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(t=await I(e.src)),e.tagName==="VIDEO"&&(t=await I(e.poster)),e.tagName==="CANVAS"&&await new Promise(r=>{e.toBlob(async n=>{t=await N(n),r()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const r=await e.convertToBlob();t=await N(r)}else(e instanceof File||e instanceof Blob)&&(t=await N(e));return new Uint8Array(t)};var $e=I;const ke=Se,Te=me,be=Ae,Re=Ee,_e=Oe,ve=$e;var Ne={defaultOptions:ke,spawnWorker:Te,terminateWorker:be,onMessage:Re,send:_e,loadImage:ve};const Ie=ge,y=j,{log:W}=A,Me=M,w=z,{defaultOptions:Pe,spawnWorker:Ce,terminateWorker:Ue,onMessage:De,loadImage:B,send:We}=Ne;let F=0;var G=async(e="eng",t=w.LSTM_ONLY,r={},n={})=>{const c=Me("Worker",F),{logger:L,errorHandler:S,...d}=Ie({...Pe,...r}),m={},R=typeof e=="string"?e.split("+"):e;let k=t,s=n;const l=[w.DEFAULT,w.LSTM_ONLY].includes(t)&&!d.legacyCore;let E,T;const O=new Promise((o,a)=>{T=o,E=a}),$=o=>{E(o.message)};let h=Ce(d);h.onerror=$,F+=1;const g=({id:o,action:a,payload:i})=>new Promise((u,f)=>{W(`[${c}]: Start ${o}, action=${a}`);const p=`${a}-${o}`;m[p]={resolve:u,reject:f},We(h,{workerId:c,jobId:o,action:a,payload:i})}),H=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),Y=o=>g(y({id:o,action:"load",payload:{options:{lstmOnly:l,corePath:d.corePath,logging:d.logging}}})),J=(o,a,i)=>g(y({id:i,action:"FS",payload:{method:"writeFile",args:[o,a]}})),V=(o,a)=>g(y({id:a,action:"FS",payload:{method:"readFile",args:[o,{encoding:"utf8"}]}})),q=(o,a)=>g(y({id:a,action:"FS",payload:{method:"unlink",args:[o]}})),Z=(o,a,i)=>g(y({id:i,action:"FS",payload:{method:o,args:a}})),C=(o,a)=>g(y({id:a,action:"loadLanguage",payload:{langs:o,options:{langPath:d.langPath,dataPath:d.dataPath,cachePath:d.cachePath,cacheMethod:d.cacheMethod,gzip:d.gzip,lstmOnly:[w.DEFAULT,w.LSTM_ONLY].includes(k)&&!d.legacyLang}}})),_=(o,a,i,u)=>g(y({id:u,action:"initialize",payload:{langs:o,oem:a,config:i}})),x=(o="eng",a,i,u)=>{if(l&&[w.TESSERACT_ONLY,w.TESSERACT_LSTM_COMBINED].includes(a))throw Error("Legacy model requested but code missing.");const f=a||k;k=f;const p=i||s;s=p;const v=(typeof o=="string"?o.split("+"):o).filter(oe=>!R.includes(oe));return R.push(...v),v.length>0?C(v,u).then(()=>_(o,f,p,u)):_(o,f,p,u)},Q=(o={},a)=>g(y({id:a,action:"setParameters",payload:{params:o}})),X=async(o,a={},i={text:!0},u)=>g(y({id:u,action:"recognize",payload:{image:await B(o),options:a,output:i}})),ee=async(o,a)=>{if(l)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return g(y({id:a,action:"detect",payload:{image:await B(o)}}))},te=async()=>(h!==null&&(Ue(h),h=null),Promise.resolve());De(h,({workerId:o,jobId:a,status:i,action:u,data:f})=>{const p=`${u}-${a}`;if(i==="resolve")W(`[${o}]: Complete ${a}`),m[p].resolve({jobId:a,data:f}),delete m[p];else if(i==="reject")if(m[p].reject(f),delete m[p],u==="load"&&E(f),S)S(f);else throw Error(f);else i==="progress"&&L({...f,userJobId:a})});const re={id:c,worker:h,load:H,writeText:J,readText:V,removeFile:q,FS:Z,reinitialize:x,setParameters:Q,recognize:X,detect:ee,terminate:te};return Y().then(()=>C(e)).then(()=>_(e,t,n)).then(()=>T(re)).catch(()=>{}),O};const K=G,Be=async(e,t,r)=>{const n=await K(t,1,r);return n.recognize(e).finally(async()=>{await n.terminate()})},Fe=async(e,t)=>{const r=await K("osd",0,t);return r.detect(e).finally(async()=>{await r.terminate()})};var je={recognize:Be,detect:Fe},ze={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},Ge={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const Ke=le,He=G,Ye=je,Je=ze,Ve=z,qe=Ge,{setLogging:Ze}=A;var xe={languages:Je,OEM:Ve,PSM:qe,createScheduler:Ke,createWorker:He,setLogging:Ze,...Ye};const tt=ae({__proto__:null},[xe]);export{tt as i};
