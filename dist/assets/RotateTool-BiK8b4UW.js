import{r as i,j as t}from"./index-HKiqIxh0.js";import{P as r}from"./PDFButton-CDUsgRP_.js";function B(){const[n,y]=i.useState(null),[c,d]=i.useState([]),[p,f]=i.useState(!1);async function h(a){const e=a.target.files[0];if(!e)return;y(e);const s=await e.arrayBuffer(),o=await r.load(s);d(new Array(o.getPageCount()).fill(!1))}function x(a){d(e=>e.map((s,o)=>o===a?!s:s))}async function u(a){if(n){f(!0);try{const e=await n.arrayBuffer(),s=await r.load(e),o=await r.create(),j=s.getPageCount(),b=[...Array(j).keys()];(await o.copyPages(s,b)).forEach((m,R)=>{if(c[R]){const P=a==="cw"?90:270;m.setRotation(P)}o.addPage(m)});const w=await o.save(),C=new Blob([w],{type:"application/pdf"}),g=URL.createObjectURL(C),l=document.createElement("a");l.href=g,l.download=n.name.replace(/\.pdf$/i,"")+"_rotated.pdf",l.click(),URL.revokeObjectURL(g)}catch(e){console.error(e),alert("Rotate failed: "+e.message)}finally{f(!1)}}}return t.jsxs("div",{children:[t.jsx("h2",{children:"Rotate Pages"}),t.jsxs("div",{className:"dropzone",children:[t.jsx("input",{type:"file",accept:"application/pdf",onChange:h}),t.jsx("div",{className:"muted",children:"Load a PDF then select pages to rotate."})]}),c.length>0&&t.jsxs("div",{style:{marginTop:12},children:[t.jsx("div",{className:"muted",children:"Click pages to toggle selection for rotation."}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(120px,1fr))",gap:8,marginTop:8},children:c.map((a,e)=>t.jsxs("div",{className:"file-item",onClick:()=>x(e),style:{cursor:"pointer",background:a?"#eef2ff":""},children:["Page ",e+1]},e))}),t.jsxs("div",{style:{marginTop:12,display:"flex",gap:8},children:[t.jsx("button",{className:"btn",onClick:()=>u("cw"),disabled:p,children:"Rotate CW"}),t.jsx("button",{className:"btn",onClick:()=>u("ccw"),disabled:p,children:"Rotate CCW"})]})]})]})}export{B as default};
