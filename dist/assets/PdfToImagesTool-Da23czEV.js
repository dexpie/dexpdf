import{r as u,j as t}from"./index-HKiqIxh0.js";import{p as d}from"./pdf-DLgImPGD.js";import{J as k}from"./jszip.min-BjWT6RtQ.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";try{d.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${d.version}/pdf.worker.min.js`}catch(l){console.warn("pdfjs worker not set",l)}function S(){const[l,w]=u.useState(null),[f,h]=u.useState([]),[x,m]=u.useState(!1);async function j(a){const e=a.target.files[0];if(!e)return;w(e);const r=await e.arrayBuffer(),c=await d.getDocument({data:r}).promise;h(new Array(c.numPages).fill(!1))}function b(a){h(e=>e.map((r,c)=>c===a?!r:r))}async function y(){if(l){m(!0);try{const a=await l.arrayBuffer(),e=await d.getDocument({data:a}).promise,r=f.flatMap((s,o)=>s?[o+1]:[]);if(r.length===0){alert("Select pages to export"),m(!1);return}const c=[];for(const s of r){const o=await e.getPage(s),n=o.getViewport({scale:2}),i=document.createElement("canvas");i.width=Math.ceil(n.width),i.height=Math.ceil(n.height);const p=i.getContext("2d");await o.render({canvasContext:p,viewport:n}).promise;const g=await new Promise(v=>i.toBlob(v,"image/png"));c.push({pnum:s,blob:g})}if(r.length===1){const s=c[0].blob,o=URL.createObjectURL(s),n=document.createElement("a");n.href=o,n.download=`${l.name.replace(/\.pdf$/i,"")}_page_${c[0].pnum}.png`,n.click(),URL.revokeObjectURL(o)}else{const s=new k;for(const p of c){const g=await p.blob.arrayBuffer();s.file(`${l.name.replace(/\.pdf$/i,"")}_page_${p.pnum}.png`,g)}const o=await s.generateAsync({type:"blob"}),n=URL.createObjectURL(o),i=document.createElement("a");i.href=n,i.download=`${l.name.replace(/\.pdf$/i,"")}_pages.zip`,i.click(),URL.revokeObjectURL(n)}}catch(a){console.error(a),alert("Failed: "+a.message)}finally{m(!1)}}}return t.jsxs("div",{children:[t.jsx("h2",{children:"PDF â†’ Images"}),t.jsxs("div",{className:"dropzone",children:[t.jsx("input",{type:"file",accept:"application/pdf",onChange:j}),t.jsx("div",{className:"muted",children:"Select a PDF, then choose pages to export as PNG."})]}),f.length>0&&t.jsxs("div",{style:{marginTop:12},children:[t.jsx("div",{className:"muted",children:"Click pages to select"}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(90px,1fr))",gap:8,marginTop:8},children:f.map((a,e)=>t.jsxs("div",{className:"file-item",onClick:()=>b(e),style:{cursor:"pointer",background:a?"#eef2ff":""},children:["Page ",e+1]},e))}),t.jsx("div",{style:{marginTop:12},children:t.jsx("button",{className:"btn",onClick:y,disabled:x,children:x?"Rendering...":"Export Selected as PNG"})})]})]})}export{S as default};
